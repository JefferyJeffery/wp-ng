!function(e,t){"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(e.angular)}(this,function(e){e.module("pageslide-directive",[]).directive("pageslide",["$document","$timeout",function(t,s){return{restrict:"EA",transclude:!1,scope:{psOpen:"=?",psAutoClose:"@",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psZindex:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@",psClickOutside:"@",onopen:"=?",onclose:"=?"},link:function(i,o,n){function l(e){m&&!f.contains(e.target)&&(m=!1,i.psOpen=!1,i.$apply()),i.psOpen&&(m=!0)}function p(e){if(u.bodyClass){var t=u.className+"-body",s=new RegExp(" "+t+"-closed| "+t+"-open");g.className=g.className.replace(s,""),g.className+=" "+t+"-"+e}}function a(){i.psOpen?"function"==typeof i.onopen&&i.onopen():"function"==typeof i.onclose&&i.onclose()}function r(){switch(u.side){case"right":f.style.width=u.size,f.style.height="100%",f.style.top="0px",f.style.bottom="0px",f.style.right="0px";break;case"left":f.style.width=u.size,f.style.height="100%",f.style.top="0px",f.style.bottom="0px",f.style.left="0px";break;case"top":f.style.height=u.size,f.style.width="100%",f.style.left="0px",f.style.top="0px",f.style.right="0px";break;case"bottom":f.style.height=u.size,f.style.width="100%",f.style.bottom="0px",f.style.left="0px",f.style.right="0px"}}function c(e,s){switch(s.side){case"right":e.style.right="-"+s.size,s.push&&(g.style.right="0px",g.style.left="0px");break;case"left":e.style.left="-"+s.size,s.push&&(g.style.left="0px",g.style.right="0px");break;case"top":e.style.top="-"+s.size,s.push&&(g.style.top="0px",g.style.bottom="0px");break;case"bottom":e.style.bottom="-"+s.size,s.push&&(g.style.bottom="0px",g.style.top="0px")}s.keyListener&&t.off("keydown",y),s.clickOutside&&t.off("touchend click",l),m=!1,p("closed"),i.psOpen=!1}function d(e,s){switch(s.side){case"right":e.style.right="0px",s.push&&(g.style.right=s.size,g.style.left="-"+s.size);break;case"left":e.style.left="0px",s.push&&(g.style.left=s.size,g.style.right="-"+s.size);break;case"top":e.style.top="0px",s.push&&(g.style.top=s.size,g.style.bottom="-"+s.size);break;case"bottom":e.style.bottom="0px",s.push&&(g.style.bottom=s.size,g.style.top="-"+s.size)}i.psOpen=!0,s.keyListener&&t.on("keydown",y),s.clickOutside&&t.on("touchend click",l),p("open")}function y(e){var t=27,o=e.keyCode||e.which;o===t&&(c(f,u),s(function(){i.$apply()}))}var u={};u.side=i.psSide||"right",u.speed=i.psSpeed||"0.5",u.size=i.psSize||"300px",u.zindex=i.psZindex||1e3,u.className=i.psClass||"ng-pageslide",u.push="true"===i.psPush,u.container=i.psContainer||!1,u.keyListener="true"===i.psKeyListener,u.bodyClass=i.psBodyClass||!1,u.clickOutside="false"!==i.psClickOutside,u.push=u.push&&!u.container,o.addClass(u.className);var h,f,g,m=!1;if(g=u.container?document.getElementById(u.container):document.body,p("closed"),f=o[0],"div"!==f.tagName.toLowerCase()&&"pageslide"!==f.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===f.children.length)throw new Error("You need to have content inside the <pageslide>");h=e.element(f.children),g.appendChild(f),f.style.zIndex=u.zindex,f.style.position="fixed",f.style.transitionDuration=u.speed+"s",f.style.webkitTransitionDuration=u.speed+"s",f.style.height=u.size,f.style.transitionProperty="top, bottom, left, right",u.push&&(g.style.position="absolute",g.style.transitionDuration=u.speed+"s",g.style.webkitTransitionDuration=u.speed+"s",g.style.transitionProperty="top, bottom, left, right"),u.container&&(f.style.position="absolute",g.style.position="relative",g.style.overflow="hidden"),f.addEventListener("transitionend",a),r(),i.$watch("psOpen",function(e){e?d(f,u):c(f,u)}),i.$watch("psSize",function(e,t){t!==e&&(u.size=e,r())}),i.$on("$destroy",function(){f.parentNode===g&&(u.clickOutside&&t.off("touchend click",l),g.removeChild(f)),f.removeEventListener("transitionend",a)}),i.psAutoClose&&(i.$on("$locationChangeStart",function(){c(f,u)}),i.$on("$stateChangeStart",function(){c(f,u)}))}}}])});
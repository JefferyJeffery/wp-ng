!function(t,e,o,n){"use strict";o.module("ngScrollSpy",[]).value("scrollSpyDefaultConfig",{offset:200,delay:100}).run(["PositionFactory",function(e){e.refreshPositions(),o.element(t).bind("scroll",function(){e.refreshPositions()})}]).factory("PositionFactory",["$rootScope",function(o){return{position:[],refreshPositions:function(){this.position.documentHeight=Math.max(e.body.scrollHeight,e.body.offsetHeight,e.documentElement.clientHeight,e.documentElement.scrollHeight,e.documentElement.offsetHeight),this.position.windowTop=void 0!==t.pageYOffset?t.pageYOffset:(e.documentElement||e.body.parentNode||e.body).scrollTop,this.position.windowBottom=this.position.windowTop+t.innerHeight}}}]).factory("SpyFactory",["$rootScope",function(t){return{spies:[],addSpy:function(t){-1==this.spies.map(function(t){return t}).indexOf(t)&&(this.spies.push(t),this.broadcast())},removeSpy:function(t){var e=this.spies.map(function(t){return t}).indexOf(t);-1!=e&&(this.spies.splice(e,1),this.broadcast())},broadcast:function(){t.$broadcast("spied")}}}]).directive("scrollspyBroadcast",["scrollSpyDefaultConfig","scrollspyConfig","SpyFactory","PositionFactory",function(n,i,s,c){return{restrict:"A",scope:!0,link:function(r,l,f){o.extend(n,i.config);var p=parseInt(f.scrollspyOffset||n.offset);r.checkActive=function(){r.elementTop=l[0].offsetTop,r.elementBottom=r.elementTop+Math.max(l[0].scrollHeight,l[0].offsetHeight),r.elementTop-p<c.position.documentHeight-t.innerHeight?r.elementTop<=c.position.windowTop+p?s.addSpy(f.id):s.removeSpy(f.id):c.position.windowBottom>r.elementBottom-p?s.addSpy(f.id):s.removeSpy(f.id)},n.throttle?o.element(t).bind("scroll",n.throttle(function(){r.checkActive()},n.delay)):o.element(t).bind("scroll",function(){r.checkActive()}),o.element(e).ready(function(){r.checkActive()}),o.element(t).bind("resize",function(){r.checkActive()})}}}]).directive("scrollspyListen",["$timeout","SpyFactory",function(t,e){return{restrict:"A",scope:{scrollspyListen:"@",enabled:"@"},replace:!0,transclude:!0,template:function(t){var e=t[0].nodeName;return"<"+e+' data-ng-transclude data-ng-class="{active: enabled}"></'+e+">"},link:function(o){o.$on("spied",function(){t(function(){for(var t=o.scrollspyListen.split("|"),n=0;n<t.length&&!(o.enabled=t[n]===e.spies[e.spies.length-1]);n++);})})}}}]).provider("scrollspyConfig",function(){var t=this;return this.config={},this.$get=function(){var e={};return e.config=t.config,e},this})}(window,document,angular);
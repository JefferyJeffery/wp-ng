!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1),o=n(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",r)},function(e,t){"use strict";var n=function(e){return{restrict:"A",link:function(t,n,r){var o=t.$eval(r.dragular)||function(e){try{return JSON.parse(e)}catch(e){return}}(r.dragular)||{};r.dragularModel&&(o.containersModel=r.dragularModel,o.scope||(o.scope=t)),r.dragularNameSpace&&(o.nameSpace=r.dragularNameSpace.split(" ")),r.dragularOnInit&&(o.onInit=t.$eval(r.dragularOnInit)),e(n[0],o)}}};n.$inject=["dragularService"],e.exports=n},function(e,t){"use strict";var n={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},r=function(e,t){function r(r,d){function x(e){i(w,e?"off":"on","mouseup",ee),Q(ue).forEach(function(e){i(e,"on","mousedown",C)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var t=ue.eventNames[e];n.dragOverEvents[t]||(O.createEvent?(n.dragOverEvents[t]=O.createEvent("HTMLEvents"),n.dragOverEvents[t].initEvent(t,!0,!0)):(n.dragOverEvents[t]=O.createEventObject(),n.dragOverEvents[t].eventType=t))})}function C(e){if(1===u(e)&&!e.metaKey&&!e.ctrlKey){n.moveX=e.clientX,n.moveY=e.clientY;var t=D(e.target);t&&t.item&&(n.grabbed=t,N(),"mousedown"===e.type&&(S(e.target)?e.target.focus():e.preventDefault()))}}function N(e){i(w,e?"off":"on","mousemove",$)}function $(e){if(n.grabbed&&!ve.dragging){if(e.originalEvent&&(e=e.originalEvent),0===u(e))return void ee({});if(!e.clientX||e.clientX!==n.moveX||!e.clientY||e.clientY!==n.moveY){if(me(ue.ignoreInputTextSelection)){var t=b("clientX",e),r=b("clientY",e);if(S(O.elementFromPoint(t,r)))return}var o=n.grabbed;if(N("remove"),A(),P(),F(o),n.item){if(!ue.direction&&E(n.sourceItem)){var i=n.sourceItem.parentNode,a=i.offsetHeight,l=i.offsetWidth,c=n.sourceItem.clientHeight,s=n.sourceItem.clientWidth;ue.direction=a/c<l/s?"horizontal":"vertical"}var d=m(n.sourceItem);n.offsetX=b("pageX",e)-d.left,n.offsetY=b("pageY",e)-d.top,n.clientX=b("clientX",e),n.clientY=b("clientY",e),ue.boundingBox&&(n.offsetXr=b("pageX",e)-d.right,n.offsetYb=b("pageY",e)-d.bottom),e.preventDefault(),H(),y(n.item,ue.classes.transit),n.mirror.style.left=n.clientX-n.offsetX+"px",n.mirror.style.top=n.clientY-n.offsetY+"px",L(e)}}}}function A(e){var t=e?"off":"on";i(w,t,"selectstart",s),i(w,t,"click",s),i(w,t,"touchmove",s)}function D(e){if(!ve.dragging||!n.mirror){for(var t=e;E(e)&&!G(E(e));){if(ue.invalid(e,t))return;if(!(e=E(e)))return}var r=E(e);if(r&&!ue.invalid(e,t)&&ue.moves(e,r,t,v(e)))return{item:e,source:r}}}function F(e){n.sourceItem=n.item=e.item,n.source=e.source,n.initialSibling=n.currentSibling=v(e.item),me(ue.copy,[e.item,e.source])?(n.item=e.item.cloneNode(!0),n.copy=!0,ue.scope&&ue.scope.$emit(ue.eventNames.dragularcloned,n.item,e.item)):n.copy=!1;var t=Q(ue).indexOf(e.source);return n.sourceModel=V(ue)[t],n.sourceFilteredModel=ue.containersFilteredModel[t],n.initialIndex=I(e.item,e.source),ve.dragging=!0,ue.scope&&ue.scope.$emit(ue.eventNames.dragulardrag,n.sourceItem,n.source),!0}function j(e){var t=D(e);t&&(n.grabbed=t,N())}function H(){if(!n.mirror){var e=n.sourceItem.getBoundingClientRect();n.mirror=n.sourceItem.cloneNode(!0),n.mirrorWidth=e.width,n.mirrorHeight=e.height,n.mirror.style.width=g(e)+"px",n.mirror.style.height=f(e)+"px",y(n.mirror,ue.classes.mirror),ue.mirrorContainer.appendChild(n.mirror),i(w,"on","mousemove",L),y(O.body,ue.classes.unselectable),i(n.mirror,"on","wheel",ae),ue.scope&&ue.scope.$emit(ue.eventNames.dragularcloned,n.mirror,n.sourceItem)}}function P(){ve.dragging&&n.item&&te(n.item,E(n.item))}function k(){n.grabbed=!1,N("remove"),A("remove")}function L(e){function t(t){function r(r){r.$emit(ue.eventNames["dragular"+t],n.item,n.lastDropTarget,n.source,e)}ue.scope&&r(ue.scope),n.targetCtx&&n.targetCtx.o.scope&&n.targetCtx.o.scope!==ue.scope&&r(n.targetCtx.o.scope),!0===me(ue.removeOnSpill)&&("over"===t?R():W())}if(n.mirror){e.originalEvent&&(e=e.originalEvent),n.clientX=b("clientX",e),n.clientY=b("clientY",e);var r,o,i,a=n.clientX-n.offsetX,l=n.clientY-n.offsetY;ue.boundingBox&&(r=b("pageX",e),o=b("pageY",e),i=m(ue.boundingBox)),ue.lockY||(!ue.boundingBox||r>i.left+n.offsetX&&r<i.right+n.offsetXr?n.mirror.style.left=a+"px":ue.boundingBox&&(r<i.left+n.offsetX?n.mirror.style.left=n.clientX-(r-i.left)+"px":n.mirror.style.left=n.clientX-n.mirrorWidth-(r-i.right)+"px")),ue.lockX||(!ue.boundingBox||o>i.top+n.offsetY&&o<i.bottom+n.offsetYb?n.mirror.style.top=l+"px":ue.boundingBox&&(o<i.top+n.offsetY?n.mirror.style.top=n.clientY-(o-i.top)+"px":n.mirror.style.top=n.clientY-n.mirrorHeight-(o-i.bottom)+"px"));var c=J(n.mirror,n.clientX,n.clientY),u=z(c,n.clientX,n.clientY),s=u!==n.lastDropTarget;if(c!==n.lastElementBehindCursor&&(X(c,n.dragOverEvents.dragularenter,!!u),n.lastElementBehindCursor&&X(n.lastElementBehindCursor,n.dragOverEvents.dragularleave,c),n.lastElementBehindCursor=c),s&&(n.lastDropTarget&&t("out"),n.lastDropTarget=u,t("over")),u===n.source&&n.copy&&!me(ue.copySortSource))return void(E(n.item)&&n.item.parentNode.removeChild(n.item));var d,g=U(u,c);if(null!==g)d=q(u,g,n.clientX,n.clientY);else{if(!0!==me(ue.revertOnSpill)||n.copy)return void(n.copy&&E(n.item)&&n.item.parentNode.removeChild(n.item));d=n.initialSibling,u=n.source}(null===d||d!==n.item&&d!==v(n.item)&&d!==n.currentSibling)&&(n.currentSibling=d,u.insertBefore(n.item,d),ue.scope&&ue.scope.$emit(ue.eventNames.dragularshadow,n.item,u,e))}}function z(e,t,r){function o(e){return n.containersCtx[e]&&n.containersCtx[e][n.containers[e].indexOf(i)]}for(var i=e,a=null;i&&!function(){if(!G(i))return!1;for(var l,c=U(i,e),u=q(i,c,t,r),s=K(i,u),d=ue.nameSpace.length;d--;)if(l=ue.nameSpace[d],-1!==n.containers[l].indexOf(i)){a=o(l);break}return n.target=i,!!s||(a||(a=o("dragularCommon")),a&&B(a.o.containersModel)&&(a.m=V(a.o)[Q(a.o).indexOf(i)]),!(a&&a.o.accepts&&!a.o.accepts(n.item,i,n.source,u,n.sourceModel,n.initialIndex))&&(!(ue.isContainer&&ue.isContainerAccepts&&!ue.isContainerAccepts(n.item,i,n.source,u,n.sourceModel,n.initialIndex))&&(!ue.canBeAccepted||ue.canBeAccepted(n.item,i,n.source,u,n.sourceModel,n.initialIndex))))}();)i=E(i);return i&&a&&(n.targetCtx=a),i}function R(){M(n.item,ue.classes.hide)}function W(){ve.dragging&&y(n.item,ue.classes.hide)}function K(e,t){var r=void 0!==t?t:n.mirror?n.currentSibling:v(n.item);return e===n.source&&r===n.initialSibling}function U(e,t){for(var n=t;n!==e&&E(n)!==e;)n=E(n);return n===w?null:n}function q(e,t,n,r){function o(e){return e?v(t):t}var i="horizontal"===ue.direction;return t!==e?function(){var e=t.getBoundingClientRect();return o(i?n>e.left+g(e)/2:r>e.top+f(e)/2)}():function(){var t,o,a,l=e.children.length;for(t=0;t<l;t++){if(o=e.children[t],a=o.getBoundingClientRect(),i&&a.left>n)return o;if(!i&&a.top>r)return o}return null}()}function J(e,t,n){var r,o=e||{},i=o.className;return o.className+=" "+ue.classes.hide,r=O.elementFromPoint(t,n),o.className=i,r}function G(e){if(!e)return!1;for(var t=ue.nameSpace.length;t--;)if(-1!==n.containers[ue.nameSpace[t]].indexOf(e))return!0;return ue.isContainer(e)?(n.tempModel=ue.isContainerModel(e),!0):(n.tempModel=null,!1)}function Q(e){return Z("containers",e)}function V(e){return Z("containersModel",e,!0)}function Z(e,t,r){return B(t[e])?o(t[e](t===ue?ve:null,n),r,t.scope):t[e]}function _(e){if(ve.dragging){var t=arguments.length>0?e:me(ue.revertOnSpill),r=E(n.item),o=K(r);o||n.copy||!t||n.source.insertBefore(n.item,n.initialSibling),!n.sourceModel||n.copy||t?ue.scope&&(o||t)&&ue.scope.$emit(ue.eventNames.dragularcancel,n.item,n.source,n.sourceModel,n.initialIndex):te(n.item,r),(!n.sourceModel||n.copy||t||o)&&re()}}function ee(e){if(k(),ve.dragging){e.originalEvent&&(e=e.originalEvent),n.clientX=b("clientX",e),n.clientY=b("clientY",e);var t=J(n.mirror,n.clientX,n.clientY),r=z(t,n.clientX,n.clientY);r&&(n.copy&&me(ue.copySortSource)||!n.copy||r!==n.source)?te(n.item,r):me(ue.removeOnSpill)?ne():_(),n.target=null,n.lastElementBehindCursor&&X(n.lastElementBehindCursor,n.dragOverEvents.dragularrelease,t),ue.scope&&ue.scope.$emit(ue.eventNames.dragularrelease,n.item,n.source,e)}}function te(r,o){function a(){function e(e){K(o)?e.$emit(ue.eventNames.dragularcancel,r,n.source,n.sourceModel,n.initialIndex):e.$emit(ue.eventNames.dragulardrop,r,o,n.source,n.sourceModel,n.initialIndex,n.targetModel,u)}if(Q(ue).forEach(function(e){i(e,"off","mousedown",C),i(e,"on","mousedown",C)}),ue.compileItemOnDrop){var a=angular.element(o).scope?angular.element(o).scope():ue.scope;a&&a.$applyAsync(function(){var e=t(n.copy?l.cloneNode(!0):l)(a);r.parentNode===o&&o.removeChild(r),o.insertBefore(e[0],c),re()})}ue.scope&&e(ue.scope),n.targetCtx&&n.targetCtx.o.scope&&n.targetCtx.o.scope!==ue.scope&&e(n.targetCtx.o.scope),ue.compileItemOnDrop||re()}if(!r)return void re();var l=n.sourceItem,c=n.currentSibling,u=I(r,o);n.copy&&o===n.source&&E(r)&&me(ue.copySortSource)&&r.parentNode.removeChild(n.sourceItem),n.sourceModel&&!K(o)?(n.targetCtx&&n.targetCtx.fm&&(u=n.targetCtx.m.indexOf(n.targetCtx.fm[u])),n.sourceFilteredModel&&(n.initialIndex=n.sourceModel.indexOf(n.sourceFilteredModel[n.initialIndex])),e.$applyAsync(function(){n.sourceModel&&(o===n.source?n.sourceModel.splice(u,0,n.sourceModel.splice(n.initialIndex,1)[0]):(n.dropElmModel=n.copy&&!ue.dontCopyModel?angular.copy(n.sourceModel[n.initialIndex]):n.sourceModel[n.initialIndex],n.tempModel?n.targetModel=n.tempModel:n.targetModel=n.targetCtx&&n.targetCtx.m||n.sourceModel,r.parentNode.removeChild(r),n.copy||n.sourceModel.splice(n.initialIndex,1),n.targetModel&&n.targetModel.splice(u,0,n.dropElmModel)),E(r)&&r.parentNode.removeChild(r),a())})):a()}function ne(){if(ve.dragging){var t=E(n.item);t&&t.removeChild(n.item),n.sourceModel&&e.$applyAsync(function(){n.sourceModel.splice(n.initialIndex,1),re()}),ue.scope&&ue.scope.$emit(n.copy?ue.eventNames.dragularcancel:ue.eventNames.dragularremove,n.item,t,n.sourceModel,n.initialIndex),n.sourceModel||re()}}function re(){k(),le(),n.item&&M(n.item,ue.classes.transit),ve.dragging=!1,!0===me(ue.removeOnSpill)&&W(),ue.scope&&(n.lastDropTarget&&ue.scope.$emit(ue.eventNames.dragularout,n.item,n.lastDropTarget,n.source),ue.scope.$emit(ue.eventNames.dragulardragend,n.item)),n.source=n.item=n.sourceItem=n.initialSibling=n.currentSibling=n.sourceModel=null,n.initialIndex=n.currentIndex=n.lastDropTarget=n.tempModel=n.targetModel=null,n.dropElmModel=n.targetCtx=n.copy=n.moveX=n.moveY=null}function oe(){x(!0),ie(ue.containers),ee({})}function ie(t){e.$applyAsync(function(){(T(t)?t:c(t)).forEach(function(e){angular.forEach(ue.nameSpace,function(t){var r;r=n.containers[t].indexOf(e),n.containers[t].splice(r,1),n.containersCtx[t].splice(r,1)})})})}function ae(e){if(n.target){e.originalEvent&&(e=e.originalEvent);var t=n.target.scrollTop;n.target.scrollTop+=e.deltaY,t!==n.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function le(){n.mirror&&(M(O.body,ue.classes.unselectable),i(w,"off","mousemove",L),i(n.mirror,"off","wheel",ae),E(n.mirror)&&n.mirror.parentNode.removeChild(n.mirror),n.mirror=null)}function ce(e){console.warn("Deprecated method drake.sanitizeContainersModel! Will be removed in next major release! Please use sanitizeContainers instead."),o(e,!0,ue.scope)}var ue,se=r||[],de=d||{},me=Y,ge={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},fe={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},pe={copyOptions:!1,classes:ge,eventNames:fe,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:a,isContainerModel:p,isContainerAccepts:l,moves:l,accepts:l,canBeAccepted:l,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:a,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},ve={containers:n.containers,containersCtx:n.containersCtx,sanitizeContainersModel:ce,sanitizeContainers:o,isContainer:G,start:j,end:P,cancel:_,remove:ne,destroy:oe,dragging:!1};return function(){1!==arguments.length||T(r)||angular.isElement(r)||r[0]||"string"==typeof r?"string"==typeof r&&(se=document.querySelectorAll(r)):(de=r||{},se=[]),ue=de.copyOptions?angular.copy(de):de}(),function(){var e=angular.extend({},pe,ue);angular.extend(ue,e),ue.classes&&(e=angular.extend({},ge,ue.classes),angular.extend(ue.classes,e)),ue.eventNames&&(e=angular.extend({},fe,ue.eventNames),angular.extend(ue.eventNames,e))}(),function(){h(ue.boundingBox)||(ue.boundingBox=!1),ue.containers&&(se=ue.containers),ue.containers=o(se,!1,ue.scope),ue.containersModel=o(ue.containersModel,!0,ue.scope),T(ue.containersFilteredModel)?ue.containersFilteredModel=T(ue.containersFilteredModel[0])?ue.containersFilteredModel:[ue.containersFilteredModel]:ue.containersFilteredModel=[],ue.nameSpace||(ue.nameSpace=["dragularCommon"]),T(ue.nameSpace)||(ue.nameSpace=[ue.nameSpace]),ue.nameSpace.forEach(function(e){n.containers[e]||(n.containers[e]=[],n.containersCtx[e]=[]);for(var t,r=Q(ue).length,o=0;o<r;o++){if(!(t=Q(ue)[o]))throw new Error("Container element must be defined!");if(-1!==n.containers[e].indexOf(t))throw new Error("Cannot register container element more than once! Container element: ");n.containers[e].push(t),n.containersCtx[e].push({o:ue,m:V(ue)[o],fm:ue.containersFilteredModel[o]})}})}(),x(),ue.onInit&&ue.onInit(ve,ue),ve}function o(e,t,n){if(B(e))return e;if(T(e))return t?T(e[0])?e:[e]:e;if("string"==typeof e&&n){var r=n.$eval(e);return B(r)?r:function(){return n.$eval(e)}}return e?c(e):[]}function i(e,t,n,r){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[t]](n,r,{passive:!1}),e[c[t]](o[n],r,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[n]?l[t](i[n],r):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[n]?l[t](a[n],r):o[n]&&l[t](o[n],r),l[t](n,r)}function a(){return!1}function l(){return!0}function c(e,t){return T(e)?e:e.length?Array.prototype.slice.call(e,t):[e]}function u(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function s(e){e.originalEvent&&(e=e.originalEvent),n.grabbed&&e.preventDefault()}function d(e,t){return void 0!==window[t]?window[t]:w.clientHeight?w[e]:O.body[e]}function m(e){var t=e.getBoundingClientRect(),n=d("scrollTop","pageYOffset"),r=d("scrollLeft","pageXOffset");return{left:t.left+r,right:t.right+r,top:t.top+n,bottom:t.bottom+n}}function g(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(){return[]}function v(e){if(e)return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var t=n.classesCache[e];return t?t.lastIndex=0:n.classesCache[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}function y(e,t){var n=e.className;n.length?x(t).test(n)||(e.className+=" "+t):e.className=t}function M(e,t){e.className=e.className.replace(x(t)," ").trim()}function C(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,t){var n=C(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),!n.type||n.type.indexOf("touch")<0?n[e]:-1===n.type.indexOf("end")&&n.originalEvent.touches[0][e.replace("client","page")]}function E(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||N(e)}function N(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||N(E(e))))}function I(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function X(e,t,r){e&&(n.extra=r,e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t))}function Y(e,t,r){return B(e)?!!e.apply(r||this,t||n):!!e}var O=document,w=O.documentElement,T=Array.isArray,B=angular.isFunction;return r.cleanEnviroment=function(){n.classesCache={},n.containersCtx={},n.containers={},n.mirror=void 0},r.shared=n,r};r.$inject=["$rootScope","$compile"],e.exports=r}])});
!function(){"use strict";function e(e){var a=[1,2.5,5];return Math.floor(Math.pow(10,Math.floor(e/3))*a[e%3])}function a(e){if(e<1)return 0;var a=Math.floor(Math.log(e)/Math.LN10),t=e/(2.5*Math.pow(10,a));return t>=3&&(a++,t=0),3*a+Math.round(Math.min(2,t))}function t(t){return t===1/0?1/0:e(a(t))}function r(e,a){return e=angular.isArray(e)?e:[e],a?e.concat(a):e}function n(e){var a=e&&e.match(/^(?:items )?(\d+)-(\d+)\/(\d+|\*)$/);return a?{from:+a[1],to:+a[2],total:"*"===a[3]?1/0:+a[3]}:"*/0"===e?{total:0}:null}function i(e){return e.to-e.from+1}angular.module("bgf.paginateAnything",[]).directive("bgfPagination",function(){var o=50;return{restrict:"AE",scope:{url:"=",collection:"=",urlParams:"=?",headers:"=?",page:"=?",perPage:"=?",perPagePresets:"=?",autoPresets:"=?",clientLimit:"=?",linkGroupSize:"=?",reloadPage:"=?",size:"=?",passive:"@",transformResponse:"=?",method:"@",postData:"=?",loadFn:"&",numPages:"=?",numItems:"=?",serverLimit:"=?",rangeFrom:"=?",rangeTo:"=?"},templateUrl:function(e,a){return a.templateUrl||"src/paginate-anything.html"},replace:!0,controller:["$scope","$attrs","$http",function(s,g,u){function l(t){if("true"!==s.passive&&(s.url||p)){s.$emit("pagination:loadStart",t);var g={method:s.method||"GET",url:s.url,params:s.urlParams,data:s.postData,headers:angular.extend({},s.headers,{"Range-Unit":"items",Range:[t.from,t.to].join("-")}),transformResponse:r(u.defaults.transformResponse,s.transformResponse)};(p?s.loadFn({config:g}):u(g)).then(function(r){var g=n(r.headers("Content-Range"));if(204===r.status||g&&0===g.total?(s.numItems=0,s.collection=[]):(s.numItems=g?g.total:r.data.length,s.collection=r.data||[]),g&&(s.rangeFrom=g.from,s.rangeTo=g.to,i(g)<g.total&&(t.to<g.total-1||g.to<g.total-1&&g.total<t.to)&&(!s.perPage||i(g)<s.perPage))){if(s.autoPresets){var u=a(i(g));e(u)>i(g)&&u--,s.serverLimit=e(u)}else s.serverLimit=i(g);s.perPage=s.Math.min(s.serverLimit,s.clientLimit)}s.numPages=Math.ceil(s.numItems/(s.perPage||o)),s.$emit("pagination:loadPage",r.status,r.config)},function(e){s.$emit("pagination:error",e.status,e.config)})}}s.reloadPage=!1,s.serverLimit=1/0,s.Math=window.Math;var p=void 0!==g.loadFn;"boolean"!=typeof s.autoPresets&&(s.autoPresets=!0);var c=s.linkGroupSize,m=s.clientLimit;s.linkGroupSize="number"==typeof c?c:3,s.clientLimit="number"==typeof m?m:250,s.updatePresets=function(){if(s.autoPresets){var t,r=[];for(t=Math.min(3,a(s.perPage||o));t<=a(Math.min(s.clientLimit,s.serverLimit));t++)r.push(e(t));s.perPagePresets=r}else s.perPagePresets=s.perPagePresets.filter(function(e){return e<=s.serverLimit}).concat([s.serverLimit])},s.gotoPage=function(e){e<0||e*s.perPage>=s.numItems||(s.page=e)},s.linkGroupFirst=function(){var e=Math.max(0,s.linkGroupSize-(s.numPages-1-(s.page+2)));return Math.max(0,s.page-(s.linkGroupSize+e))},s.linkGroupLast=function(){var e=Math.max(0,s.linkGroupSize-(s.page-2));return Math.min(s.numPages-1,s.page+(s.linkGroupSize+e))},s.isFinite=function(){return s.numPages<1/0},s.page=s.page||0,s.size=s.size||"md",s.autoPresets&&s.updatePresets(),s.$watch("page",function(e,a){if("true"!==s.passive&&e!==a){if(e<0||e*s.perPage>=s.numItems)return;var r=s.perPage||o;s.autoPresets&&(r=t(r)),l({from:e*r,to:(e+1)*r-1})}}),s.$watch("perPage",function(e,a){if("true"!==s.passive&&"number"==typeof a&&e!==a){var t=s.page*a,r=Math.floor(t/e);s.page!==r?s.page=r:l({from:s.page*e,to:(s.page+1)*e-1})}}),s.$watch("serverLimit",function(e,a){"true"!==s.passive&&e!==a&&s.updatePresets()}),s.$watch("url",function(e,a){"true"!==s.passive&&e!==a&&(0===s.page?s.reloadPage=!0:s.page=0)}),s.$watch("urlParams",function(e,a){"true"!==s.passive&&(angular.equals(e,a)||(0===s.page?s.reloadPage=!0:s.page=0))},!0),s.$watch("headers",function(e,a){"true"!==s.passive&&(angular.equals(e,a)||(0===s.page?s.reloadPage=!0:s.page=0))},!0),s.$watch("reloadPage",function(e,a){if("true"!==s.passive&&!0===e&&!1===a){var t=s.perPage||o;s.reloadPage=!1,l({from:s.page*t,to:(s.page+1)*t-1})}}),s.$watch("transformResponse",function(e,a){"true"!==s.passive&&e&&a&&(angular.equals(e.toString(),a.toString())||(0===s.page?s.reloadPage=!0:s.page=0))},!0),s.$on("pagination:reload",function(){s.reloadPage=!0});var f=s.perPage||o;s.autoPresets&&(f=t(f)),l({from:s.page*f,to:(s.page+1)*f-1})}]}}).filter("makeRange",function(){return function(e){var a,t;switch(e.length){case 1:a=0,t=parseInt(e[0],10)-1;break;case 2:a=parseInt(e[0],10),t=parseInt(e[1],10);break;default:return e}for(var r=[],n=a;n<=t;n++)r.push(n);return r}})}(),angular.module("bgf.paginateAnything").run(["$templateCache",function(e){"use strict";e.put("src/paginate-anything.html",'<div class=paginate-anything><ul class="pagination pagination-{{size}} links" ng-if="numPages > 1"><li ng-class="{disabled: page <= 0}"><a href ng-click=gotoPage(page-1)>&laquo;</a></li><li ng-if="linkGroupFirst() > 0"><a href ng-click=gotoPage(0)>1</a></li><li ng-if="linkGroupFirst() > 1" class=disabled><a href>&hellip;</a></li><li ng-repeat="p in [linkGroupFirst(), linkGroupLast()] | makeRange" ng-class="{active: p === page}"><a href ng-click=gotoPage(p)>{{p+1}}</a></li><li ng-if="linkGroupLast() < numPages - 2" class=disabled><a href>&hellip;</a></li><li ng-if="isFinite() && linkGroupLast() < numPages - 1"><a href ng-click=gotoPage(numPages-1)>{{numPages}}</a></li><li ng-class="{disabled: page >= numPages - 1}"><a href ng-click=gotoPage(page+1)>&raquo;</a></li></ul><div class=per-page ng-if="perPagePresets.length > 0 && numPages > 1"><select ng-model=$parent.perPage ng-options="p for p in perPagePresets"></select>per page</div></div>')}]);
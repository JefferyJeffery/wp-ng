!function(n){"use strict";n.module("ngLocationSearch",[]).directive("ngLocationSearch",["$log","$timeout","$location","$window","$parse","$httpParamSerializer",function(i,e,t,o,a,r){return{restrict:"A",require:["?ngModel","?^form"],link:function(c,u,l,s){function f(i){return!!n.isString(i)&&i.replace(/\/$/,"")}function h(a){var u={},s=c.$eval(l.ngLocationSearchReset),h=f(l.ngLocationSearchUrl),S=f(o.location.href.replace(o.location.hash,""));try{var $=n.fromJson(a);a=$}catch(n){}n.forEach(g,function(i,e){var t=null;n.isObject(a)&&n.isDefined(a[i])?t=a[i]:n.isString(a)&&(t=a),u[i]=""!==t?t:null});var d=t.search();if(s||(u=n.extend({},d,u)),n.isString(h)&&h!==S){var v=t.path(),m=f(o.location.hash.replace(t.url(),"")),b=r(u);v=v?"/":"",b=b?"?"+b:"";var L=h+"/"+m+v+b;o.location.href=L,i.debug(L)}else e(function(){t.search(u)})}var g,S=s[0],$=s[1];if(l.ngLocationSearch&&(S||$)){g=c.$eval(l.ngLocationSearch),g=n.isArray(g)?g:[l.ngLocationSearch];var d=null,v=function(i){d=g.length>1?{}:null,n.forEach(g,function(e,t){n.isObject(d)?d[e]=n.isDefined(i[e])?i[e]:null:n.isDefined(i[e])&&(d=i[e])}),n.isObject(d)&&(d=n.toJson(d)),(0,a(l.ngModel).assign)(c,d)},m=function(i){var e=c.$eval(l.ngSubmit);!e&&n.isObject(e)||(n.isUndefined(c[l.ngSubmit])&&(c[l.ngSubmit]={}),n.forEach(g,function(e,t){n.isDefined(i[e])&&(c[l.ngSubmit][e]=i[e])}))};S&&(c.$watch(function(){return S.$modelValue},function(n,i){n!==i&&h(n)}),c.$on("$locationChangeStart",function(n,i,e,o,a){v(t.search())}),v(t.search())),$&&(u.on("submit",function(){var n=c.$eval(l.ngSubmit);n&&h(n)}),c.$on("$locationChangeStart",function(n,i,e,o,a){m(t.search())}),m(t.search()))}c.$on("$destroy",function(){n.isDefined(c[l.ngSubmit])&&delete c[l.ngSubmit]})}}}])}(window.angular);
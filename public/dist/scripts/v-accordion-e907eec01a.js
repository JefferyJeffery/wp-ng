!function(e){"use strict";function n(n){return{restrict:"E",transclude:!0,controller:i,scope:{control:"=?",expandCb:"&?onexpand",collapseCb:"&?oncollapse",id:"@?"},link:{pre:function(n,i,a){n.allowMultiple=e.isDefined(a.multiple)&&(""===a.multiple||"true"===a.multiple)},post:function(i,a,t,o,d){if(d(i.$parent.$new(),function(e,n){n.$accordion=i.internalControl,i.id&&(n.$accordion.id=i.id),a.append(e)}),t.$set("role","tablist"),i.allowMultiple&&t.$set("aria-multiselectable","true"),e.isDefined(i.control)){!function(){var n=["toggle","expand","collapse","expandAll","collapseAll","hasExpandedPane"];e.forEach(n,function(e){if(i.control[e])throw new Error("The `"+e+"` method can not be overwritten")})}();var r=e.extend({},i.internalControl,i.control);i.control=i.internalControl=r}else i.control=i.internalControl;n(function(){var n=e.isDefined(o.getAccordionId())?o.getAccordionId()+":onReady":"vAccordion:onReady";i.$emit(n)},0)}}}}function i(n){var i=this,a=!1;n.panes=[],n.expandCb=e.isFunction(n.expandCb)?n.expandCb:e.noop,n.collapseCb=e.isFunction(n.collapseCb)?n.collapseCb:e.noop,i.hasExpandedPane=function(){for(var e=!1,i=0,a=n.panes.length;i<a;i++){if(n.panes[i].isExpanded){e=!0;break}}return e},i.getPaneByIndex=function(i){var a;return e.forEach(n.panes,function(n){n.$parent&&e.isDefined(n.$parent.$index)&&n.$parent.$index===i&&(a=n)}),a||n.panes[i]},i.getPaneIndex=function(i){var a;return e.forEach(n.panes,function(n){n.$parent&&e.isDefined(n.$parent.$index)&&n===i&&(a=n.$parent.$index)}),e.isDefined(a)?a:n.panes.indexOf(i)},i.getPaneById=function(i){var a;return e.forEach(n.panes,function(e){e.id&&e.id===i&&(a=e)}),a},i.getPaneId=function(e){return e.id},i.getAccordionId=function(){return n.id},i.disable=function(){a=!0},i.enable=function(){a=!1},i.addPane=function(e){if(!n.allowMultiple&&i.hasExpandedPane()&&e.isExpanded)throw new Error("The `multiple` attribute can't be found");n.panes.push(e),e.isExpanded&&n.expandCb({index:i.getPaneIndex(e),id:e.id,pane:e})},i.focusNext=function(){for(var e=n.panes.length,i=0;i<e;i++){if(n.panes[i].isFocused){var a=i+1;a>n.panes.length-1&&(a=0);n.panes[a].paneElement.find("v-pane-header")[0].focus();break}}},i.focusPrevious=function(){for(var e=n.panes.length,i=0;i<e;i++){if(n.panes[i].isFocused){var a=i-1;a<0&&(a=n.panes.length-1);n.panes[a].paneElement.find("v-pane-header")[0].focus();break}}},i.toggle=function(e){!a&&e&&(n.allowMultiple||i.collapseAll(e),e.isExpanded=!e.isExpanded,e.isExpanded?n.expandCb({index:i.getPaneIndex(e),id:e.id,pane:e}):n.collapseCb({index:i.getPaneIndex(e),id:e.id,pane:e}))},i.expand=function(e){!a&&e&&(n.allowMultiple||i.collapseAll(e),e.isExpanded||(e.isExpanded=!0,n.expandCb({index:i.getPaneIndex(e),id:e.id,pane:e})))},i.collapse=function(e){!a&&e&&e.isExpanded&&(e.isExpanded=!1,n.collapseCb({index:i.getPaneIndex(e),id:e.id,pane:e}))},i.expandAll=function(){if(!a){if(!n.allowMultiple)throw new Error("The `multiple` attribute can't be found");e.forEach(n.panes,function(e){i.expand(e)})}},i.collapseAll=function(t){a||e.forEach(n.panes,function(e){e!==t&&i.collapse(e)})},n.internalControl={toggle:function(n){e.isString(n)?i.toggle(i.getPaneById(n)):i.toggle(i.getPaneByIndex(n))},expand:function(n){e.isString(n)?i.expand(i.getPaneById(n)):i.expand(i.getPaneByIndex(n))},collapse:function(n){e.isString(n)?i.collapse(i.getPaneById(n)):i.collapse(i.getPaneByIndex(n))},expandAll:i.expandAll,collapseAll:i.collapseAll,hasExpandedPane:i.hasExpandedPane}}function a(n,i,a){return{restrict:"E",require:"^vAccordion",transclude:!0,controller:t,scope:{isExpanded:"=?expanded",isDisabled:"=?ngDisabled",id:"@?"},link:function(n,t,o,d,r){function c(i){i=e.isDefined(g)?g+":"+i:"vAccordion:"+i,n.$emit(i)}function l(){d.disable(),f.attr("aria-hidden","false"),u.attr({"aria-selected":"true","aria-expanded":"true"}),c("onExpand"),i.addClass(t,p.expanded).then(function(){d.enable(),c("onExpandAnimationEnd")})}function s(){d.disable(),f.attr("aria-hidden","true"),u.attr({"aria-selected":"false","aria-expanded":"false"}),c("onCollapse"),i.removeClass(t,p.expanded).then(function(){d.enable(),c("onCollapseAnimationEnd")})}r(n.$parent.$new(),function(e,i){i.$pane=n.internalControl,n.id&&(i.$pane.id=n.id),t.append(e)}),e.isDefined(n.isExpanded)||(n.isExpanded=e.isDefined(o.expanded)&&""===o.expanded),e.isDefined(o.disabled)&&(n.isDisabled=!0);var p=a.states,u=t.find("v-pane-header"),f=t.find("v-pane-content"),x=f.find("div"),g=d.getAccordionId();if(!u[0])throw new Error("The `v-pane-header` directive can't be found");if(!f[0])throw new Error("The `v-pane-content` directive can't be found");n.paneElement=t,n.paneContentElement=f,n.paneInnerElement=x,n.accordionCtrl=d,d.addPane(n),n.$evalAsync(function(){n.isExpanded?(t.addClass(p.expanded),f.css("max-height","none").attr("aria-hidden","false"),u.attr({"aria-selected":"true","aria-expanded":"true"})):(f.css("max-height","0px").attr("aria-hidden","true"),u.attr({"aria-selected":"false","aria-expanded":"false"}))}),n.$watch("isExpanded",function(e,n){if(e===n)return!0;e?l():s()})}}}function t(e){var n=this;n.isExpanded=function(){return e.isExpanded},n.toggle=function(){e.isAnimating||e.isDisabled||e.accordionCtrl.toggle(e)},n.expand=function(){e.isAnimating||e.isDisabled||e.accordionCtrl.expand(e)},n.collapse=function(){e.isAnimating||e.isDisabled||e.accordionCtrl.collapse(e)},n.focusPane=function(){e.isFocused=!0},n.blurPane=function(){e.isFocused=!1},e.internalControl={toggle:n.toggle,expand:n.expand,collapse:n.collapse,isExpanded:n.isExpanded}}function o(){return{restrict:"E",require:"^vPane",transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(e,n,i){i.$set("role","tabpanel"),i.$set("aria-hidden","true")}}}function d(){return{restrict:"E",require:["^vPane","^vAccordion"],transclude:!0,template:"<div ng-transclude></div>",scope:{},link:function(n,i,a,t){function o(){if(p)return!1;n.$apply(function(){l.toggle()})}function d(e){32===e.keyCode||13===e.keyCode?(n.$apply(function(){l.toggle()}),e.preventDefault()):39===e.keyCode||40===e.keyCode?(n.$apply(function(){s.focusNext()}),e.preventDefault()):37!==e.keyCode&&38!==e.keyCode||(n.$apply(function(){s.focusPrevious()}),e.preventDefault())}function r(){l.focusPane()}function c(){l.blurPane()}a.$set("role","tab"),a.$set("tabindex","0");var l=t[0],s=t[1],p=e.isDefined(a.inactive);i[0].onfocus=r,i[0].onblur=c,i.bind("click",o),i.bind("keydown",d),n.$on("$destroy",function(){i.unbind("click",o),i.unbind("keydown",d),i[0].onfocus=null,i[0].onblur=null})}}}e.module("vAccordion.config",[]).constant("accordionConfig",{states:{expanded:"is-expanded"},expandAnimationDuration:.5}).animation(".is-expanded",["$animateCss","accordionConfig",function(n,i){return{addClass:function(a,t,o){var d=e.element(a[0].querySelector("v-pane-content")),r=e.element(d[0].querySelector("div")),c=r[0].offsetHeight;return n(d,{easing:"ease",from:{maxHeight:"0px"},to:{maxHeight:c+"px"},duration:i.expandAnimationDuration}).start().done(function(){d.css("max-height","none"),o()}),function(e){e&&d.css("max-height","none")}},removeClass:function(a,t,o){var d=e.element(a[0].querySelector("v-pane-content")),r=e.element(d[0].querySelector("div")),c=r[0].offsetHeight;return n(d,{easing:"ease",from:{maxHeight:c+"px"},to:{maxHeight:"0px"},duration:i.expandAnimationDuration}).start().done(o),function(e){e&&d.css("max-height","0px")}}}}]),e.module("vAccordion.directives",[]),e.module("vAccordion",["vAccordion.config","vAccordion.directives"]),e.module("vAccordion.directives").directive("vAccordion",n),n.$inject=["$timeout"],i.$inject=["$scope"],e.module("vAccordion.directives").directive("vPane",a),a.$inject=["$timeout","$animate","accordionConfig"],t.$inject=["$scope"],e.module("vAccordion.directives").directive("vPaneContent",o),e.module("vAccordion.directives").directive("vPaneHeader",d)}(angular);